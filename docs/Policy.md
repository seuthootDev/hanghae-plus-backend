# 정책 문서 (Policy Document)

## 1. 포인트 정책 (Point Policy)

### 1.1 포인트 충전 정책
- **최소 충전 금액**: 1,000원
- **최대 충전 금액**: 1,000,000원
- **충전 단위**: 1,000원 단위
- **충전 제한**: 일일 최대 3회, 월 최대 10회

### 1.2 포인트 사용 정책
- **사용 가능 금액**: 보유 포인트 내에서만 사용 가능
- **최소 사용 금액**: 1,000원
- **부분 사용**: 불가능 (전액 사용 또는 미사용)
- **만료 정책**: 충전일로부터 1년 후 만료

### 1.3 포인트 환불 정책
- **환불 불가**: 포인트는 현금 환불 불가
- **이전 불가**: 다른 사용자에게 이전 불가

## 2. 쿠폰 정책 (Coupon Policy)

### 2.1 쿠폰 발급 정책
- **발급 방식**: 선착순 발급
- **발급 제한**: 사용자당 동일 쿠폰 1개
- **발급 시간**: 매일 오전 9시 (한정 수량)
- **발급 조건**: 회원가입 완료 사용자

### 2.2 쿠폰 종류 및 할인율
| 쿠폰 타입 | 할인율/금액 | 최소 주문 금액 | 사용 제한 |
|-----------|-------------|----------------|-----------|
| DISCOUNT_10PERCENT | 10% 할인 | 10,000원 | 1회 |
| DISCOUNT_20PERCENT | 20% 할인 | 20,000원 | 1회 |
| FIXED_1000 | 1,000원 할인 | 5,000원 | 1회 |
| FIXED_2000 | 2,000원 할인 | 10,000원 | 1회 |

### 2.3 쿠폰 사용 정책
- **사용 조건**: 유효기간 내, 미사용 상태
- **중복 사용**: 불가능 (1주문 1쿠폰)
- **최대 할인**: 주문 금액의 50% 초과 할인 불가
- **환불 시**: 사용된 쿠폰 복구 불가

### 2.4 쿠폰 유효기간
- **기본 유효기간**: 발급일로부터 30일
- **연장 불가**: 유효기간 연장 불가
- **만료 처리**: 자동 만료 처리

## 3. 주문 정책 (Order Policy)

### 3.1 주문 생성 정책
- **최소 주문 금액**: 1,000원
- **최대 주문 수량**: 상품당 10개
- **재고 확인**: 주문 시점 재고 확인
- **동시 주문**: 동일 상품 동시 주문 제한

### 3.2 주문 취소 정책
- **취소 가능 기간**: 결제 완료 후 1시간 이내
- **취소 불가 조건**: 
  - 배송 시작 후
  - 결제 완료 1시간 경과
  - 사용된 쿠폰이 있는 경우

### 3.3 주문 상태 관리
| 상태 | 설명 | 다음 가능 상태 |
|------|------|----------------|
| PENDING | 주문 생성, 결제 대기 | PAID, CANCELLED |
| PAID | 결제 완료, 배송 준비 | SHIPPED, CANCELLED |
| SHIPPED | 배송 중 | DELIVERED |
| DELIVERED | 배송 완료 | COMPLETED |
| CANCELLED | 주문 취소 | - |
| COMPLETED | 주문 완료 | - |

## 4. 결제 정책 (Payment Policy)

### 4.1 결제 방식
- **포인트 결제**: 보유 포인트로 결제
- **혼합 결제**: 포인트 + 현금 결제 (향후 확장)
- **결제 수단**: 포인트 전용

### 4.2 결제 처리 정책
- **실시간 처리**: 결제 요청 시 즉시 처리
- **재시도**: 결제 실패 시 3회 재시도
- **타임아웃**: 30초 이내 처리 완료
- **동시성 제어**: 동일 주문 중복 결제 방지

### 4.3 결제 실패 정책
- **실패 사유**:
  - 포인트 부족
  - 시스템 오류
  - 타임아웃
- **실패 처리**: 주문 상태를 PENDING으로 유지
- **재결제**: 실패 후 1시간 이내 재결제 가능

## 5. 상품 정책 (Product Policy)

### 5.1 상품 관리 정책
- **재고 관리**: 실시간 재고 확인
- **가격 정책**: 동일 상품 동일 가격
- **카테고리**: 음료, 식품, 생활용품 등
- **상품 상태**: 판매중, 품절, 판매중지

### 5.2 인기 상품 정책
- **통계 기준**: 최근 3일간 판매량
- **순위 기준**: 판매량
- **갱신 주기**: 매일 오전 6시
- **표시 개수**: 상위 5개 상품

### 5.3 재고 정책
- **재고 확인**: 주문 시점 실시간 확인
- **재고 차감**: 결제 완료 시점 차감
- **재고 부족**: 주문 생성 불가
- **재고 복구**: 주문 취소 시 재고 복구

## 6. 시스템 정책 (System Policy)

### 6.1 성능 정책
- **응답 시간**: 평균 1초 이내
- **동시 처리**: 100명 동시 접속 지원
- **가용성**: 99.9% 이상

### 6.2 보안 정책
- **데이터 암호화**: 민감 정보 암호화 저장
- **접근 제어**: 사용자별 데이터 접근 제한
- **로그 관리**: 모든 거래 로그 기록

### 6.3 데이터 정책
- **데이터 보관**: 주문 데이터 3년 보관
- **개인정보**: 개인정보보호법 준수
- **백업**: 일일 자동 백업

## 7. 예외 처리 정책 (Exception Policy)

### 7.1 시스템 오류
- **일시적 오류**: 3회 재시도 후 실패 처리
- **영구적 오류**: 관리자 알림 및 수동 처리
- **데이터 정합성**: 트랜잭션 롤백

### 7.2 비즈니스 예외
- **포인트 부족**: 결제 실패 처리
- **재고 부족**: 주문 생성 실패
- **쿠폰 만료**: 쿠폰 사용 불가 처리
- **중복 주문**: 동일 주문 차단

### 7.3 사용자 예외
- **잘못된 요청**: 400 Bad Request
- **권한 없음**: 401 Unauthorized
- **리소스 없음**: 404 Not Found
- **서버 오류**: 500 Internal Server Error 